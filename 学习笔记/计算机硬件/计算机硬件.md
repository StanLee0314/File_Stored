![img](https://pic3.zhimg.com/80/8bf6ef80ddbcd9ed5984fe9a51bb5b78_hd.jpg)

**CPU：**

**高速缓冲存储器****内部存储器**

寄存器是中央处理器内的组成部份。它跟CPU有关。寄存器是有限存贮容量的高速存贮部件，它们可用来暂存指令、数据和位址。在中央处理器的控制部件中，包含的寄存器有指令寄存器(IR)和程序计数器(PC)。在中央处理器的算术及逻辑部件中，包含的寄存器有累加器(ACC)。

**存储器**

存储器范围最大，它几乎涵盖了所有关于存储的范畴。你所说的寄存器，内存，都是存储器里面的一种。凡是有存储能力的硬件，都可以称之为存储器，这是自然，硬盘更加明显了，它归入外存储器行列，由此可见——。

**内存**

内存既专业名上的内存储器，它不是个什么神秘的东西，它也只是存储器中的沧海一粟，它包涵的范围也很大，一般分为**只读存储器（ROM）**和**随机存储器（RAM）**，以及最强悍的**高速缓冲存储器（CACHE）**，只读存储器应用广泛，它通常是一块在硬件上集成的可读芯片，作用是识别与控制硬件，它的特点是只可读取，不能写入。随机存储器的特点是可读可写，断电后一切数据都消失，我们所说的内存条就是指它了。

**缓存CACHE**

缓存就是数据交换的缓冲区（称作Cache），当某一硬件要读取数据时，会首先从缓存中查找需要的数据，如果找到了则直接执行，找不到的话则从内存中找。由于缓存的运行速度比内存快得多，故缓存的作用就是帮助硬件更快地运行。

因为缓存往往使用的是RAM（断电即掉的非永久储存），所以在用完后还是会把文件送到硬盘等存储器里永久存储。电脑里最大的缓存就是内存条了，最快的是CPU上镶的L1和L2缓存，显卡的显存是给显卡运算芯片用的缓存，硬盘上也有16M或者32M的缓存。

CACHE是在CPU中速度非常块，而容量却很小的一种存储器，它是计算机存储器中最强悍的存储器。由于技术限制，容量很难提升。

**ROM、RAM的区别：**

ROM（只读存储器或者固化存储器）

RAM（随机存取存储器）

ROM和RAM指的都是半导体存储器，ROM是Read Only Memory的缩写，RAM是Random Access Memory的缩写。ROM在系统停止供电的时候仍然可以保持数据，而RAM通常都是在掉电之后就丢失数据，典型的RAM就是计算机的内存。 

RAM有两大类，一种称为静态RAM（Static RAM/SRAM），当数据被存入其中后不会消失。SRAM速度非常快，是目前读写最快的存储设备了。当这个SRAM 单元被赋予0 或者1 的状态之后，它会保持这个状态直到下次被赋予新的状态或者断电之后才会更改或者消失。但是存储1bit 的信息需要4-6 只晶体管。因此它也非常昂贵，所以只在要求很苛刻的地方使用，譬如CPU的一级缓冲，二级缓冲。另一种称为动态RAM（Dynamic RAM/DRAM），DRAM 必须在一定的时间内不停的刷新才能保持其中存储的数据。DRAM 只要1 只晶体管就可以实现。DRAM保留数据的时间很短，速度也比SRAM慢，不过它还是比任何的ROM都要快，但从价格上来说DRAM相比SRAM要便宜很 多，计算机内存就是DRAM的。 

DRAM分为很多种，常见的主要有FPRAM/FastPage、EDORAM、SDRAM、DDR RAM、RDRAM、SGRAM以及WRAM等，这里介绍其中的一种DDR RAM。DDR RAM（Date-Rate RAM）也称作DDR SDRAM，这种改进型的RAM和SDRAM是基本一样的，不同之处在于它可以在一个时钟读写两次数据，这样就使得数据传输速度加倍了。这是目前电脑中用 得最多的内存，而且它有着成本优势，事实上击败了Intel的另外一种内存标准－Rambus DRAM。在很多高端的显卡上，也配备了高速DDR RAM来提高带宽，这可以大幅度提高3D加速卡的像素渲染能力。 

ROM也有很多种，PROM是可编程的ROM，PROM和EPROM（可擦除可编程ROM）两者区别是，PROM是一次性的，也就是软件灌入后，就无法修 改了，这种是早期的产品，现在已经不可能使用了，而EPROM是通过紫外光的照射擦出原先的程序，是一种通用的存储器。另外一种EEPROM是通过电子擦出，价格很高，写入时间很长，写入很慢。 

最初,把只能读的存储器叫做ROM(Read Only Memory),并且掉电后数据不会丢失。由于不能改写，因而使用起来很不方便。随着技术的进步，在ROM中使用一些新技术，就可以使它具有可以编程的功能。比较早的是熔丝型的可编程ROM，由于是通过熔断熔丝来编程的，所以这类ROM编程后，就不能再写了，是一次性的(OTP)。后来又出现了EPROM，是通过紫外线来擦除的，并且通过高压来编程，这类ROM上面一般有一个透明的石英玻璃窗，看上去挺漂亮的，它就是用来给紫外线照射的。后来又出现了EEPROM，不用紫外线照射就可以擦除，因而可以直接在电路中编程。另外还有FLASH ROM，又可分为NOR FLASH和NAND FLASH。FLASH ROM一般有一个特点，就是写数据时，可以将1改为0，而不能将0改为1，因而写数据前需要擦除，擦除时将所有数据置1。

之所以依然叫做ROM，归纳一下，大概有几个原因:

①不能像RAM那样快速的写；

②可能需要特殊的擦写电压；

③可能需要特殊的擦写时序；

④可能需要在写之前进行擦除操作；

⑤擦写次数有限,不像RAM那样可以随意写而不损坏；

⑥掉电后数据不会丢失；

⑦有些可写的存储器只能写一次(OTP)。

举个例子，手机软件一般放在EEPROM中，我们打电话，有些最后拨打的号码，暂时是存在SRAM中的，不是马上写入通过记录（通话记录保存在EEPROM中），因为当时有很重要工作（通话）要做，如果写入，漫长的等待是让用户忍无可忍的。

FLASH存储器又称闪存，它结合了ROM和RAM的长处，不仅具备电子可擦出可编程（EEPROM）的性能，还不会断电丢失数据同时可以快速读取数据 （NVRAM的优势），U盘和MP3里用的就是这种存储器。在过去的20年里，嵌入式系统一直使用ROM（EPROM）作为它们的存储设备，然而近年来 Flash全面代替了ROM（EPROM）在嵌入式系统中的地位，用作存储Bootloader以及操作系统或者程序代码或者直接当硬盘使用（U盘）。 

目前Flash主要有两种NOR Flash和NADN Flash。NOR Flash的读取和我们常见的SDRAM的读取是一样，用户可以直接运行装载在NOR FLASH里面的代码，这样可以减少SRAM的容量从而节约了成本。NAND Flash没有采取内存的随机读取技术，它的读取是以一次读取一快的形式来进行的，通常是一次读取512个字节，采用这种技术的Flash比较廉价。用户 不能直接运行NAND Flash上的代码，因此好多使用NAND Flash的开发板除了使用NAND Flah以外，还作上了一块小的NOR Flash来运行启动代码。 

一般小容量的用NOR Flash，因为其读取速度快，多用来存储操作系统等重要信息，而大容量的用NAND FLASH，最常见的NAND FLASH应用是嵌入式系统采用的DOC（Disk On Chip）和我们通常用的“闪盘”，可以在线擦除。

#**话说什么是内存？**



 

看完后简单无法直视，这和我想了解的东西有什么关系呢？

**我的理解为**：内存是一种存储器，硬件上来说就是一种可以快速存储计算机数据，CPU将这些数据取得运算。内存就像一个大数组，可以存放许多数据。

 

   这里就有一个很重要的问题，CPU和内存储器都是硬件，谁来负责操作这些硬件呢？这就要说到操作系统了。我们通常用的windows、linux、unix这些操作系统，那么就很自然的想到了对于内存操作与管理其实还是由操作系统提供了机制，应用程序在这个基础上再完成相应的内存操作。

 

网上找了找资料，windows和linux的内存管理机制来看，都将内存划分为了物理内存和虚拟内存。

- 物理内存

  物理内存就是系统硬件提供的内存大小，是真正的内存，说土点就是那内存条

 

- 虚拟内存

  虚拟内存就是为了满足物理内存的不足而提出的策略，它是利用磁盘空间虚拟出的一块逻辑内存，用作虚拟内存的磁盘空间被称为交换空间（Swap Space）。然后对于内存的操作需要有一种访问的方法，既然内存是CPU的暂时存数据的地方，那么CPU读取数据时肯定要有方法去读取吧，这就是要说到-内存地址。

 

考虑到内存资源总是有限的，而对于多任务的操作系统来说，应用程序越多自然占用的就越多，那如何合理的分配内存资源呢？有两种划分方法：分段、分页。

参考文章：http://blog.csdn.net/qingfeng_happy5/article/details/4322723

 

**到这我倒是有了一些简单的理解：**

所有的应用程序都是通过编绎器编绎为了可执行文件，在这个文件里会有许多的描述内容和程序指令。当这个应用启动时，操作系统会创建一个进程，并在这个进程中分配一个地址空间，而后随着应用的不断执行和操作系统与CPU的调度会不断的在虚拟地址和物理地址之间做映射，从而拥有了真实的内存空间，可以输入指令和数据供CPU执行。

 

**再来看看堆栈**

堆栈这个名词不陌生，但对于许多开发人和我一样只知其名，不知其实。写这个笔记原因是因为我没有理解内存与堆栈为什么总会放在一起讨论？于是边看资料边记录笔记。

 



 

看到这个概念我最大的疑问是，堆栈是两种数据结构？这就是典型的数据结构没学好的人的反应，呵呵。没办法只能继续寻找资料学习。于是在学习过程中慢慢的就有些理解。

 

**先看看堆栈的一些定义和说明**

- **栈**



 

  这句话让我想到一个问题，那就是先进后出的这种数据结构有什么作用呢？带着这个疑问就去寻找栈的应用场景，下面这个场景突然让我些明白了什么：

  **“栈可以用来在函数调用的时候存储断点，做递归时要用到栈！”**

  对呀，当我们的代码在运行的时候不就可以看到一个“栈”嘛，先把方法压栈，然后逐个的取出来执行。这样代码的效率就高了许多，而且顺序不会出错。

  好了，有了这个理解再看下面的内容：

 



这里就说明了栈的优点和缺点，同时也引出了栈与堆的区别。所以可以理解栈这种数据结构就是用于大小和周期明确的高速存取结构。

一般存在栈中的数据都有哪些？比如值类型（特别是基本数据类型）和对象句柄之类。

- **堆**

看了栈对于堆的理解就要好多了，先看看定义：



 



 

所以堆要灵活的多，分配与释放都可以按需进行。在栈中也说过堆的优点是灵活，缺点也是因为灵活存取效率会低一些。

**其实就数据结构来说，堆就是一个数组或者链表，可以看作是一颗完全二叉树的存储结构，他的特点就是先进先出。**

 

**总结**

有了对内存和堆栈的一些基本概念后，再回头看一下自己的问题，内存和堆栈到底为何物？

 

**我的理解内存是计算机的一个硬件组成部分，是CPU执行指令的数据存储区，内存就是提供了这一块存储空间。想要使用这块存储空间就得用到操作系统，由于与硬件打交道的就是操作系统，而操作系统决定了对内存的管理机制。而应用软件需要对内存进行存取就要用到堆栈，这是两种数据结构，决定了数据在内存空间里的存储结构。**

 

应用程序在内存中的存储结构是由编绎器决定的。这个我的描述可能不准确，下面说一下C++中内存的分区机制可能会比较好理解一些。 

- **栈**，就是那些由编译器在需要的时候分配，在不需要的时候自动清除的变量的存储区。里面的变量通常是局部变量、函数参数等。 
- **堆**，就是那些由new分配的内存块，他们的释放编译器不去管，由我们的应用程序去控制，一般一个new就要对应一个delete。如果程序员没有释放掉，那么在程序结束后，操作系统会自动回收。 
- **自由存储区**，就是那些由malloc等分配的内存块，他和堆是十分相似的，不过它是用free来结束自己的生命的。 
- **全局/静态存储区**，全局变量和静态变量被分配到同一块内存中，在以前的C语言中，全局变量又分为初始化的和未初始化的，在C++里面没有这个区分了，他们共同占用同一块内存区。 
- **常量存储区**，这是一块比较特殊的存储区，他们里面存放的是常量，不允许修改（当然，你要通过非正当手段也可以修改，而且方法很多）
